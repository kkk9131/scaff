# 開発フロー（ブランチ運用版）

## 概要
- 本リポジトリは Docs-first 方針。`docs/` の仕様を更新→Issue 化→実装の順で進めます。
- 出力は日本語を基本。コードには日本語コメントで意図/前提を明記。
- 作業完了後は `activity.log` に日本語で要約を追記します。

## 進め方（ステップ）
1. 要件同期: `docs/` を読み合わせ、差分を反映（英日とも更新）。
2. Issue 化: MVP/ロードマップに沿って機能を分解し、受入基準を明記（Issue省略時もPRに受入基準を記載）。
3. 計画: スプリント（1–2週）を設定。WIP を少数に制限。
4. ブランチ運用（必須）: `main` 最新化→ブランチ作成→PR 駆動で開発。
5. 実装: 小さく速くPRを出す（~300行目安）。
6. テスト: 単体→結合の順で追加し、重要ロジックを重点テスト。
7. レビュー/統合: PR テンプレに従いレビュー→CI 緑→Squash Merge を基本。
8. ログ/ドキュメント: `activity.log` 追記、関連ドキュメントを同期更新（英日）。

## 2D MVP 実装順序（推奨）
- 1) テンプレ配置（長方形/L/コ/T）＋内部モデル（mm 単位・座標系）
- 2) 編集（寸法直接入力、頂点ドラッグ、直角/グリッドスナップ）
- 3) 寸法表示（外側常時表示、丸め/単位表示ルール）
- 4) 保存/読み込み（JSON スキーマ初版とI/O）
- 5) 左サイドバー（ビュー/寸法/階層/保存UI）
- 6) 描画最適化（Canvas/SVG 初期チューニング）

## Definition of Ready / Done
- Ready: 目的、仕様差分、受入基準、テスト観点、影響範囲、ロールバックがIssueに記載。
- Done: PR 承認・CI 緑、チェックリスト完了、英日ドキュメント更新、`activity.log` 追記。

## 規約
- コミット: Conventional Commits（例: `feat: add rectangle tool`）。
- ブランチ種類: `feature/*`, `fix/*`, `docs/*`, `chore/*`。
- ブランチ命名: ケバブケース。例）`feature/canvas-skeleton-#2`（Issue番号は任意）。
- 取り込み: Squash Merge を基本（履歴を簡潔に）。必要時のみ Rebase/Merge。
- コメント: 日本語で目的/注意点/トレードオフを簡潔に記載。

## ブランチ運用 詳細
- 作業開始前: `git switch main && git pull` で最新化。
- 作成: `git switch -c feature/<短説明>` でブランチ作成。
- プッシュ: `git push -u origin feature/<短説明>`。
- PR: テンプレに沿って目的/受入基準/影響範囲/テスト/スクショを記載。
- レビュー: CODEOWNERS による自動アサイン。指摘は追コミットで対応。
- マージ後: ブランチ削除、`activity.log` 追記、必要に応じてタグ。

## チェックリスト（コピペ用）
- [ ] 仕様を `docs/` に反映（英日）
- [ ] Issue に受入基準/テスト観点/影響範囲を記載
- [ ] 日本語コメントで意図をコードに明記
- [ ] 単体/結合テストを追加/更新
- [ ] PR テンプレの項目を充足
- [ ] `activity.log` に日本語で要約を追記

## 参照
- 要件: `docs/作図エディタ要件定義書.md`、`docs/２D平面作図MVP 要件定義書.md`
- 運用: `AGENTS.ja.md`（言語/コメント/チェックリスト/ログ方針）
