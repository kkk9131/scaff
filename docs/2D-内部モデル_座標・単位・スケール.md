# 2D 内部モデル（座標 / 単位 / スケール）

短いメモ（v0）

- 単位: モデルは mm（ミリメートル）を基準とする。
- 座標系: 原点はビュー中心。+X は右方向、+Y は上方向。
- 画面系: Canvas は CSS ピクセルを基準（左上原点、+Y 下方向）。
- スケール: `pxPerMm = 1/5`（例: 1px が 5mm を表す）。
  - 画面解像度（DPR）には `ctx.setTransform(dpr,0,0,dpr,0,0)` で対応し、
    描画は CSS ピクセル座標で行う（モデル→画面変換後に描く）。
- 変換:
  - 点: `screen = (cx + x_mm*pxPerMm, cy - y_mm*pxPerMm)` （`cx,cy` はビュー中心の CSS px）
  - 長さ: `px = mm * pxPerMm`

Assumptions (EN)

- Units: model uses millimeters.
- Coordinates: origin at view center, +X right, +Y up.
- Screen: canvas in CSS pixels (origin top-left, +Y down).
- Scale: `pxPerMm = 1/5` so 8000mm ≒ 1600px wide.
- DPR: set canvas size by DPR and draw in CSS pixels via `setTransform`.

今後の拡張（メモ）

- 可変スケール（ズーム）とパン（原点の移動）
- スナップ基準（グリッド, 直角）
- モデル空間にレイヤ/エンティティ/寸法要素を分離

