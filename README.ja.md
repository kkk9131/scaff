 # ２D平面作図エディタ（作業ブランチ）
 
 このリポジトリは作図エディタの要件定義と実装を管理します。現時点ではドキュメント中心ですが、フェーズ2「寸法線＋数値の常時表示（各辺外側）」の実装着手に伴い、アプリコードのスキャフォールドを追加しました。
 
 - 実装ブランチ: `feat/phase2-dimensions-always-visible`
 - 対応項目: docs/開発ロードマップ.md のフェーズ2「寸法線＋数値の常時表示（各辺外側）」
 
 ## プロジェクト構成（抜粋）
 - `docs/` 仕様・設計文書
 - `src/` アプリケーションコード（今回の寸法線ロジックの骨組みを追加）
   - `src/core/dimensions/` 寸法線モデルと計算エンジン
 - `tests/` テスト（最小の雛形）
 - `activity.log` 作業ログ（日本語）
 
## 開発コマンド（暫定）
 ツールチェーンは未導入です。導入後に更新します。
 - Nodeの想定コマンド（予定）
   - 開発: `npm run dev`
   - テスト: `npm test`
   - ビルド: `npm run build`
 - Pythonの想定コマンド（予定）
   - テスト: `uv run pytest -q`
   - 実行: `uv run app.py`
   - フォーマット: `uvx ruff format`
 
## ドキュメント優先
コード変更時は `docs/` を先に更新・同期します。今回の方針は `docs/design/dimensions-always-visible.md` を参照してください。

## 実行方法（Next.js）

開発サーバ:

```
npm run dev
```

ブラウザで `http://localhost:3000/` を開くと、左サイドバーから以下を操作できます。

- テンプレート選択（Rect/L/U/T）
- スナップ（グリッド・直角）
- 寸法（外側/オフセット量/小数/衝突回避）
- 軒の出（ON/OFF, 出幅mm）

軒の出 表示仕様:
- 壁と同色（ネオンブルー）の点線で外側オフセット輪郭を描画
- 凹部は“引っ込み”（ベベル）で一体化、凸部は直角マイター（極端角は自動ベベル）
- 各辺の中間に「出幅mm」ラベルを表示（簡易配置）

## 保存/読み込み（MVP フェーズ5）

- 上部バーの「保存」で JSON をダウンロードします。
- 「読み込み」で JSON ファイルを選択すると状態を復元できます。
- 互換フォーマット（v1）: `floors[].{ id,name,elevationMm,heightMm,color,walls{outer,holes?},eaves,shape? }`。
- セッション継続のため、ローカルストレージにも自動保存/復元されます。
